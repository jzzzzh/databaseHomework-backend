<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.example.repository.TeacherRepository">
    <select id="findAll" resultType="org.example.entity.Teacher">
        select * from teacher
    </select>
    <select id="findByID" resultType="org.example.entity.Teacher">
        select * from teacher where uuid = #{id};
    </select>
    <select id="countNum" resultType="int">
        select count(*) from teacher
    </select>
    <insert id="register">
        insert into teacher(uuid, name, password, sex, major, age) values(#{uuid}, #{name},#{password}, #{sex}, #{major}, #{age})
    </insert>
    <update id="changePassword">
        update student set password = #{password} where uuid = #{uuid}
    </update>
    <insert id="addScore">
        insert into sc(studentuuid, courseuuid, score, Compulsory, examscore, dailyscore,checkscore, grade, courseName,credit, is_updated) values (#{studentuuid}, #{courseuuid}, #{score},
                                 #{Compulsory}, #{examscore}, #{dailyscore}, #{checkscore}, #{grade}, #{courseName},  #{credit}, #{is_updated})
    </insert>
    <insert id="addCourse">
        insert into course(uuid,name,teacher_id,major,max_num,Compulsory, credit) values (#{uuid},#{name},#{teacher_id},#{major},#{max_num}, #{Compulsory}, #{credit})
    </insert>
    <insert id="addNotice">
        insert into notice(uuid, title, detail, time, teacheruuid, teachername) values (#{uuid}, #{title}, #{detail}, #{time}, #{teacheruuid}, #{teachername})
    </insert>
    <select id="selectScoreByCourseID" resultType="org.example.entity.Score">
        select * from sc where courseuuid = #{courseuuid}
    </select>
    <select id="selectCourseByTeacherID" resultType="org.example.entity.Tc">
        select * from tc where teacheruuid = #{teacheruuid}
    </select>
    <select id="selectCourseByMainTeacherID" resultType="org.example.entity.Course">
        select * from course where teacher_id = #{teacher_id}
    </select>
    <select id="selectCourseByCourseID" resultType="org.example.entity.Course">
        select * from course where uuid = #{uuid}
    </select>
    <insert id="insertNoticeToStudent">
        insert into ns(noticeuuid, studentuuid, teacheruuid) values(#{noticeuuid}, #{studentuuid}, #{teacheruuid})
    </insert>
    <select id="countCourseNum" resultType="int">
        select count(*) from course
    </select>
    <select id="countNoticeNum" resultType="int">
        select count(*) from notice
    </select>
    <update id="updateScoreByid">
        update sc set score = #{score}, examscore = #{examscore}, dailyscore = #{dailyscore},checkscore = #{checkscore}, is_updated = #{is_updated}where studentuuid = #{studentuuid} and courseuuid = #{courseuuid}
    </update>
</mapper>