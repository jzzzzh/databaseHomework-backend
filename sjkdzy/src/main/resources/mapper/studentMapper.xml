<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.example.repository.StudentRepository">
    <select id="findAll" resultType="org.example.entity.Student">
        select * from student
    </select>
    <select id="findByID" resultType="org.example.entity.Student">
        select * from student where uuid = #{id}
    </select>
    <insert id="register">
        insert into student(uuid, name, sex, grade, class_num, major, password) values(#{uuid}, #{name}, #{sex}, #{grade}, #{class_num}, #{major}, #{password})
    </insert>
    <select id="countNum" resultType="int">
        select count(*) from student
    </select>
    <update id="changePassword">
        update student set password = #{password} where uuid = #{uuid}
    </update>
    <select id="selectScoreByid" resultType="org.example.entity.Score">
        select * from sc where studentuuid = #{studentuuid}
    </select>
    <select id="selectCourseBycourseid"  resultType="org.example.entity.Course">
        select * from course where uuid = #{uuid}
    </select>
    <select id="selectCourseBymajor"  resultType="org.example.entity.Course">
        select * from course where major like "%"#{major}"%"
    </select>
    <select id="selectCourseByname"  resultType="org.example.entity.Course">
        select * from course where name like "%"#{name}"%"
    </select>
    <select id="selectCourseByteacherID"  resultType="org.example.entity.Course">
        select * from course where teacher_id = #{teacher_id}
    </select>
    <select id="selectTeacherByName" resultType="org.example.entity.Teacher">
        select  * from teacher where name like "%"#{name}"%"
    </select>
    <insert id="insertTeacherScore">
        insert into teacherscore(studentuuid, teacheruuid, score, detail, courseuuid) values (#{studentuuid}, #{teacheruuid},
                                                                                              #{score}, #{detail}, #{courseuuid})
    </insert>
    <insert id="insertCourseByid">
        insert into sc(studentuuid, courseuuid, score, Compulsory, examscore, dailyscore,checkscore, grade, courseName,credit, is_updated) values (#{studentuuid}, #{courseuuid}, #{score},
                                                                                                                                    #{Compulsory}, #{examscore}, #{dailyscore}, #{checkscore}, #{grade}, #{courseName},  #{credit}, #{is_updated})
    </insert>
    <delete id="deleteCourseByid">
        delete from sc where studentuuid = #{studentuuid} and courseuuid = #{courseuuid}
    </delete>
    <update id="changeStudentInfo">
        update student set name = #{name}, sex = #{sex}, grade = #{grade}, class_num = #{class_num}, major = #{major} where uuid = #{uuid}
    </update>
</mapper>